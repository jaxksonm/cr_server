<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />i<title>Index â€” Dope Single File App</title>
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%233b82f6'/%3E%3Ctext x='50' y='57' font-size='48' text-anchor='middle' fill='white' font-family='Arial'>ðŸ”¥</text%3E%3C/svg%3E">
<style>
  :root{
    --bg1: #0f172a;
    --glass: rgba(255,255,255,0.06);
    --accent: #7c3aed;
    --accent-2: #06b6d4;
    --muted: rgba(255,255,255,0.7);
    --card-radius: 16px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    color: #e6eef8;
    background: radial-gradient(1200px 600px at 10% 10%, rgba(124,58,237,0.12), transparent),
                radial-gradient(900px 400px at 90% 80%, rgba(6,182,212,0.08), transparent),
                linear-gradient(180deg, var(--bg1), #071028 60%);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:28px;
    gap:20px;
    overflow:hidden;
  }

  /* animated blobs */
  .blobs{position:fixed;inset:0;pointer-events:none;mix-blend-mode:screen;opacity:0.9}
  .blob{position:absolute;border-radius:50%;filter:blur(60px);}
  .b1{width:420px;height:420px;background:linear-gradient(45deg,var(--accent),#ef4444);left:-8%;top:-10%;animation:drift1 18s ease-in-out infinite}
  .b2{width:360px;height:360px;background:linear-gradient(45deg,var(--accent-2),#34d399);right:-6%;bottom:-6%;animation:drift2 20s ease-in-out infinite}
  @keyframes drift1{0%{transform:translateY(0) rotate(0)}50%{transform:translateY(20px) rotate(20deg)}100%{transform:translateY(0) rotate(0)}}
  @keyframes drift2{0%{transform:translateY(0) rotate(0)}50%{transform:translateY(-30px) rotate(-20deg)}100%{transform:translateY(0) rotate(0)}}

  .container{
    width:min(980px,96vw);
    display:grid;
    grid-template-columns: 1fr 420px;
    gap:28px;
    align-items:start;
    z-index:1;
  }

  .hero{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius: var(--card-radius);
    padding:36px;
    box-shadow: 0 6px 40px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
    min-height:380px;
    position:relative;
    overflow:hidden;
    border: 1px solid rgba(255,255,255,0.04);
  }
  .hero h1{
    margin:0;
    font-size:34px;
    letter-spacing:-0.02em;
  }
  .sub{
    margin-top:10px;
    color:var(--muted);
    font-size:15px;
    max-width:66%;
  }

  .features{
    margin-top:22px;
    display:flex;
    gap:12px;
    flex-wrap:wrap;
  }
  .pill{
    background:linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
    padding:10px 12px;
    border-radius:999px;
    display:inline-flex;
    gap:10px;
    align-items:center;
    font-weight:600;
    font-size:13px;
    color: #eaf2ff;
    border:1px solid rgba(255,255,255,0.02);
  }
  .pill svg{width:18px;height:18px;opacity:0.9}

  .screenshot{
    margin-top:20px;
    border-radius:12px;
    overflow:hidden;
    border: 1px solid rgba(255,255,255,0.03);
    background:linear-gradient(180deg,#031529 40%, rgba(255,255,255,0.01));
    padding:14px;
  }

  .phone{
    width:320px;height:180px;border-radius:8px;padding:12px;background:linear-gradient(180deg,#062032,#02121b);
    display:flex;flex-direction:column;gap:8px;color:var(--muted);
    font-size:13px;
  }
  .phone .top{display:flex;justify-content:space-between;align-items:center}
  .phone .bar{height:10px;width:48%;background:rgba(255,255,255,0.02);border-radius:999px}
  .phone .list{flex:1;display:flex;flex-direction:column;gap:6px;overflow:hidden}
  .note{background:rgba(255,255,255,0.03);padding:8px;border-radius:8px;font-weight:600}

  /* auth card */
  .auth{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:var(--card-radius);
    padding:22px;
    width:100%;
    max-width:420px;
    box-shadow:0 10px 40px rgba(2,6,23,0.6);
    border:1px solid rgba(255,255,255,0.04);
  }
  .brand{display:flex;align-items:center;gap:12px}
  .logo{
    width:56px;height:56px;border-radius:12px;display:grid;place-items:center;
    background:linear-gradient(135deg,var(--accent),var(--accent-2));box-shadow:0 6px 22px rgba(12,18,50,0.6);
    font-weight:700;font-size:20px;
  }
  .auth h2{margin:8px 0 2px;font-size:20px}
  .auth p{margin:0;color:var(--muted);font-size:13px}

  form{margin-top:16px;display:flex;flex-direction:column;gap:12px}
  input[type="text"],input[type="password"],input[type="email"],textarea,select{
    background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);
    padding:12px;border-radius:10px;color:inherit;font-size:14px;
    outline:none;transition:box-shadow .18s, transform .12s;
  }
  input:focus{box-shadow:0 6px 20px rgba(12,18,50,0.5);transform:translateY(-2px);border-color:rgba(255,255,255,0.06)}
  .row{display:flex;gap:8px}
  .btn{
    background:linear-gradient(90deg,var(--accent),var(--accent-2));border:none;padding:10px 14px;border-radius:10px;color:white;font-weight:700;cursor:pointer;
    box-shadow:0 6px 14px rgba(12,18,50,0.45);
  }
  .ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);font-weight:700}
  .muted{color:var(--muted);font-size:13px}

  .switch{display:flex;gap:8px;align-items:center;justify-content:center;margin-top:6px}
  .link{color:#cfefff;text-decoration:underline;cursor:pointer}

  /* dashboard */
  .dash{
    display:none;
    gap:12px;
    min-height:260px;
  }
  .dash.active{display:flex;flex-direction:column}
  .topbar{display:flex;justify-content:space-between;align-items:center}
  .avatar{
    height:44px;width:44px;border-radius:12px;background:linear-gradient(90deg,var(--accent),var(--accent-2));
    display:grid;place-items:center;font-weight:800;color:white;font-size:16px;
  }
  .notes{
    margin-top:12px;display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:10px;
  }
  .note-card{background:rgba(255,255,255,0.03);padding:10px;border-radius:10px;min-height:80px;display:flex;flex-direction:column;gap:8px}
  .note-card textarea{background:transparent;border:none;resize:none;color:inherit;font-weight:600;min-height:36px}

  footer{margin-top:14px;color:var(--muted);font-size:12px;text-align:center}

  /* responsive */
  @media (max-width:980px){
    .container{grid-template-columns:1fr;align-items:stretch}
    .hero{order:2}
  }
</style>
</head>
<body>
  <div class="blobs" aria-hidden="true">
    <div class="blob b1"></div>
    <div class="blob b2"></div>
  </div>

  <div class="container" role="main">
    <section class="hero" aria-labelledby="hero-title">
      <div class="brand" style="gap:16px">
        <div class="logo">DOPE</div>
        <div>
          <h1 id="hero-title">Dope Single-File App</h1>
          <p class="sub">A playful demo: register, login, and keep little notes. Everything works from this one file â€” secure-ish local hashing, nice UI, and small animations.</p>
        </div>
      </div>

      <div class="features" aria-hidden="false">
        <div class="pill"><svg viewBox="0 0 24 24" fill="none"><path d="M12 2l3 7h7l-5.6 4.1L19 22l-7-4-7 4 1.6-8.9L2 9h7z" fill="white" opacity="0.12"/></svg>Offline accounts</div>
        <div class="pill"><svg viewBox="0 0 24 24" fill="none"><path d="M5 12h14" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" opacity="0.9"/></svg>SHA-256 hashing</div>
        <div class="pill"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" fill="white" opacity="0.06"/></svg>Responsive & tiny</div>
      </div>

      <div class="screenshot" aria-hidden="true">
        <div class="phone" role="img" aria-label="Mock notes screenshot">
          <div class="top">
            <div class="bar"></div>
            <div style="display:flex;gap:8px;align-items:center">
              <div style="width:8px;height:8px;border-radius:50%;background:#ef4444"></div>
              <div style="width:8px;height:8px;border-radius:50%;background:#f59e0b"></div>
              <div style="width:8px;height:8px;border-radius:50%;background:#10b981"></div>
            </div>
          </div>
          <div class="list">
            <div class="note">Buy groceries â€” milk, hot sauce, vibes.</div>
            <div class="note">Sketch UI for new project â€” purple theme.</div>
            <div style="opacity:0.7;font-size:12px">Signed in as: <strong id="mock-user">demo</strong></div>
          </div>
        </div>
      </div>

      <footer>Made with âœ¨ in one file â€¢ Try registering & logging in</footer>
    </section>

    <aside class="auth" aria-labelledby="auth-title">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <h2 id="auth-title">Welcome</h2>
          <p class="muted">Register a quick account or log into a demo user. Everything stays in your browser.</p>
        </div>
        <div style="text-align:right">
          <div style="font-size:12px;color:var(--muted)">Tip</div>
          <div style="font-weight:700;font-size:14px">Try: demo / demo123</div>
        </div>
      </div>

      <div id="forms">

        <!-- Register / Login form -->
        <form id="authForm" onsubmit="return false" aria-describedby="auth-desc">
          <input id="name" type="text" placeholder="Full name" autocomplete="name" required />
          <input id="email" type="email" placeholder="Email (will be your username)" autocomplete="username" required />
          <input id="password" type="password" placeholder="Password" autocomplete="new-password" required />
          <div style="display:flex;gap:8px;align-items:center">
            <div style="flex:1">
              <div id="pwdStrength" class="muted">Strength: â€”</div>
            </div>
            <button id="actionBtn" class="btn" type="button">Register</button>
          </div>

          <div class="switch">
            <div class="muted">Already got an account?</div>
            <div id="toggleMode" class="link">Switch to Login</div>
          </div>
        </form>

        <!-- Dashboard -->
        <div id="dashboard" class="dash" aria-live="polite">
          <div class="topbar">
            <div>
              <div style="font-size:13px;color:var(--muted)">Signed in as</div>
              <div style="display:flex;align-items:center;gap:10px">
                <div id="avatar" class="avatar">DG</div>
                <div>
                  <div id="displayName" style="font-weight:800">Demo User</div>
                  <div id="displayEmail" class="muted" style="font-size:13px">demo@example.com</div>
                </div>
              </div>
            </div>
            <div style="display:flex;flex-direction:column;gap:8px">
              <button id="logoutBtn" class="ghost" style="padding:8px 10px">Log out</button>
              <button id="deleteBtn" class="ghost" style="padding:8px 10px">Delete account</button>
            </div>
          </div>

          <div style="display:flex;gap:8px;margin-top:10px">
            <input id="newNote" type="text" placeholder="Write a quick note and press Add" style="flex:1" />
            <button id="addNoteBtn" class="btn">Add</button>
          </div>

          <div class="notes" id="notesGrid" aria-live="polite"></div>
        </div>

      </div>

      <div style="margin-top:16px" id="status" aria-live="polite"></div>
    </aside>
  </div>

<script>
/*
  Single-file app logic:
  - uses localStorage for persistence
  - stores users under key "dope_users" as { email: {name, email, pwdHash, notes: []} }
  - uses SubtleCrypto SHA-256 for hashing passwords (fallback to plain text if unavailable with warning)
*/

const el = id => document.getElementById(id);
const usersKey = 'dope_users_v1';
const state = { mode: 'register' }; // or 'login'
const forms = { authForm: el('authForm'), dashboard: el('dashboard') };

const setStatus = (msg, isErr=false) => {
  const s = el('status');
  s.textContent = msg || '';
  s.style.color = isErr ? '#ff8b8b' : '#bfefff';
};

// helpers
async function hashStr(s) {
  if (crypto && crypto.subtle && crypto.subtle.digest) {
    const enc = new TextEncoder();
    const data = enc.encode(s);
    const hash = await crypto.subtle.digest('SHA-256', data);
    // hex
    return Array.from(new Uint8Array(hash)).map(b=>b.toString(16).padStart(2,'0')).join('');
  } else {
    // fallback - not recommended; still fine for demo
    return btoa(s);
  }
}

function loadUsers(){
  try{
    const raw = localStorage.getItem(usersKey);
    return raw ? JSON.parse(raw) : {};
  }catch(e){}
  return {};
}
function saveUsers(users){
  localStorage.setItem(usersKey, JSON.stringify(users));
}

function setMode(mode){
  state.mode = mode;
  const btn = el('actionBtn');
  const toggle = el('toggleMode');
  if (mode === 'register') {
    btn.textContent = 'Register';
    toggle.textContent = 'Switch to Login';
    el('name').style.display = 'block';
    el('email').placeholder = 'Email (will be your username)';
  } else {
    btn.textContent = 'Login';
    toggle.textContent = 'Switch to Register';
    el('name').style.display = 'none';
    el('email').placeholder = 'Email';
  }
  setStatus('');
}

el('toggleMode').addEventListener('click', () => {
  setMode(state.mode === 'register' ? 'login' : 'register');
  el('authForm').reset();
  el('pwdStrength').textContent = 'Strength: â€”';
});

el('password').addEventListener('input', () => {
  const p = el('password').value;
  el('pwdStrength').textContent = `Strength: ${strengthLabel(p)}`;
});

function strengthLabel(p){
  if (!p) return 'â€”';
  let score = 0;
  if (p.length >= 8) score++;
  if (/[A-Z]/.test(p)) score++;
  if (/[0-9]/.test(p)) score++;
  if (/[^A-Za-z0-9]/.test(p)) score++;
  return ['Weak','Okay','Good','Strong','Epic'][Math.min(score,4)];
}

// Register / Login action
el('actionBtn').addEventListener('click', async () => {
  const email = el('email').value.trim().toLowerCase();
  const password = el('password').value;
  const name = el('name').value.trim() || email.split('@')[0];
  if (!email || !password) {
    setStatus('Email and password required', true); return;
  }
  const users = loadUsers();

  if (state.mode === 'register') {
    if (users[email]) { setStatus('Account already exists. Try login.', true); return; }
    const hash = await hashStr(password);
    users[email] = { name, email, pwdHash: hash, notes: [] };
    saveUsers(users);
    setStatus('Account created. You are signed in.');
    await signInUser(users[email]);
  } else {
    const acc = users[email];
    if (!acc) { setStatus('No such account â€” register first.', true); return; }
    const hash = await hashStr(password);
    if (hash !== acc.pwdHash) { setStatus('Wrong password!', true); return; }
    setStatus('Welcome back â€” signed in.');
    await signInUser(acc);
  }
});

// quick demo user pre-seed
(function seedDemo(){
  const users = loadUsers();
  if (!users['demo']) {
    hashStr('demo123').then(h => {
      users['demo'] = { name: 'Demo User', email:'demo', pwdHash: h, notes: ['Buy milk','Sketch purple UI'] };
      saveUsers(users);
    });
  }
})();

async function signInUser(account){
  // show dashboard
  el('forms').classList.add('signed');
  forms.authForm.style.display = 'none';
  forms.dashboard.classList.add('active');

  // set display
  el('displayName').textContent = account.name;
  el('displayEmail').textContent = account.email;
  el('avatar').textContent = initials(account.name);
  el('mock-user').textContent = account.name;

  // bind notes & actions
  el('addNoteBtn').onclick = () => {
    const v = el('newNote').value.trim();
    if (!v) return;
    const users = loadUsers(); users[account.email].notes.unshift(v); saveUsers(users);
    el('newNote').value = '';
    renderNotes(users[account.email].notes);
    setStatus('Note added.');
  };
  el('logoutBtn').onclick = () => {
    signOut();
  };
  el('deleteBtn').onclick = () => {
    if (!confirm('Delete your account? This is permanent locally.')) return;
    const users = loadUsers(); delete users[account.email]; saveUsers(users); signOut();
    setStatus('Account deleted locally.');
  };

  renderNotes(account.notes || []);
}

function renderNotes(notes){
  const grid = el('notesGrid');
  grid.innerHTML = '';
  if (!notes || notes.length===0){
    grid.innerHTML = '<div class="muted">No notes yet â€” add one above.</div>';
    return;
  }
  notes.forEach((n,idx)=>{
    const div = document.createElement('div');
    div.className = 'note-card';
    const ta = document.createElement('textarea');
    ta.value = n;
    ta.addEventListener('input', () => {
      // live-save
      const users = loadUsers(); const email = el('displayEmail').textContent;
      users[email].notes[idx] = ta.value;
      saveUsers(users);
      setStatus('Saved.');
    });
    const rm = document.createElement('button');
    rm.className = 'ghost';
    rm.textContent = 'Delete';
    rm.addEventListener('click', () => {
      const users = loadUsers(); const email = el('displayEmail').textContent;
      users[email].notes.splice(idx,1); saveUsers(users);
      renderNotes(users[email].notes);
      setStatus('Note deleted.');
    });
    div.appendChild(ta);
    div.appendChild(rm);
    grid.appendChild(div);
  });
}

function signOut(){
  forms.dashboard.classList.remove('active');
  forms.authForm.style.display = 'flex';
  forms.authForm.reset();
  el('pwdStrength').textContent = 'Strength: â€”';
  setMode('login');
  setStatus('Signed out.');
}

// initials helper
function initials(name){
  return name.split(' ').filter(Boolean).slice(0,2).map(x=>x[0].toUpperCase()).join('');
}

// small accessibility: pressing Enter in password triggers action
el('password').addEventListener('keydown', (e) => {
  if (e.key === 'Enter') el('actionBtn').click();
});

// On load: show login mode
setMode('register');

// neat: if user visits with fragment #login or #register, toggle
if (location.hash === '#login') setMode('login');
if (location.hash === '#register') setMode('register');

</script>
</body>
</html>
